**	test carte mpu avec afficheur led segments commandé*   directement par le port b*  	lecture de la carte VITC* 	et emission série à partir du bit 7 du port c*porta		equ	$00portb		equ	$01portc		equ	$02portd		equ	$03ddra		equ	$04ddrb		equ	$05ddrc		equ	$06timerData	equ	$08timerCtrl	equ	$09MiscReg		equ	$0asciCtrl		equ	$10sciSTS		equ	$11sciData		equ	$12									org	$0100main						lda	#$ff			sta	ddrb			sta	ddrc			lda	#$f0			sta	ddra						lda	#$00			sta	porta			sta	portc						sta	$80			sta	$81			sta	$82			sta	$83			sta	$84			sta	$85			sta	$86			sta	$87					lda	#3			sta	$2800						lda		#%00011101   ;38400 bauds			sta		$2800						cli						affichage	ldx		#$00loop		lda		#$ff			sta		portb			txa			lsl		a			lsl		a			lsl		a			lsl		a			sta		porta						lda		$80,x						cpx		#7			bne		NotMsb			and		#$03			NotMsb		jsr		Conv			sta		portb			cpx		#00			bne		NotFirstDigit			lda		$87			and    #$8   beq		NotFirstDigit			bclr7	portbNotFirstDigit			jsr		attente			inc		x			cpx		#8			bne		loop					jmp		affichageConv		stx		$88			tax					lda		table,x			eor		#$ff			ldx		$88			rtsattente		lda		#$80att			sub 	#$01			tst		a			bne		att			rts	*** routine d'intéruption pour la lecture du vitcint			sei	intw   		bil		intw			ldx		#$08			lda		#$ff			sta		portb			loopint		txa			dec		a			lsl		a			lsl		a			lsl		a			lsl		a			sta		porta			lda		porta			and		#$0f			eor		#$0f			sta		$7f,xdr3			lda		$2800			and		#$2			beq		dr3			   			lda		porta			eor		#$0f			sta		$2801			nop			nop			dec		x			bne		loopint			cli			rti* table de conversion pour l'afficheur lcd			table		dc.b	$3f,$06,$5b,$4f,$66,$6d,$7d,$07,$7f,$6f			dc.b	%01011111			dc.b	%01111100			dc.b	%01011000			dc.b	%01011110			dc.b	%01111001			dc.b	%01110001					org	$1ffa			dc.w	int					org	$1ffe			dc.w	main			end